import pandas as pd
from detection_app import app
import os


class DataPreprocessing:
    @staticmethod
    def get_data():
        data = pd.read_csv(os.path.join(app.root_path, "data_preprocessor", "dataset.csv"))
        return data

    def preprocess(self, feature_list):
        input_df = DataPreprocessing.get_data()
        input_list = list(input_df.columns)
        matches = [match for match in feature_list if match in input_list]
        concat_df = pd.concat([input_df, input_df[matches]])
        data = concat_df.iloc[[1]]
        data[[i for i in data.columns if data[i].notnull().any()]] = 1
        data = data.fillna(0)

        return data
